# str.format()

## 参数

### 位置参数,省略或者从0开始

    "Hello, {} and {}!".format("John", "Mary")
    "Hello, {0} and {1}!".format("John", "Mary")

### 关键字参数，同时使用关键字参数和位置参数，位置参数要在前

    "Hello, {boy} and {girl}!".format(boy="John", girl="Mary")

### 访问参数的属性或元素

    "My car is {0.color}.".format(car)
    "The first student is {student[0]}.".format(student=students)

### 使用元组和字典传参,*元组要在**字典前面

    hulk = '绿巨人', '拳头'
    captain = {'name': '美国队长', 'weapon': '盾'}
    '我是{}, 我怕{weapon}。'.format(*hulk, **captain))
    '我是{name}, 我怕{1}。'.format(*hulk, **captain))

### 参数输出转换

    调用str()  "It's a {0!s}."

    调用repr()  "We can get info from {name!r}."

    调用ascii()  'I am {!a}!'.format('Bruce Lee 李小龙')

## 格式说明符

    在替换字段中，格式说明符前面有一个冒号 :
    {字段名!转换字段:格式说明符}
    其中格式说明符本身可以是一个字段名，比如：
    '{0:{1}}'.format(3.14159, '.4f')    3.1416

    标准格式说明符的格式
    如果不通过重写 __format__ 方法来进行自定义的话，标准格式说明符的形式如下。其中方括号是可选的。
        [[fill]align][sign][#][0][width][grouping_option][.precision][type]
        中文形式可以写作：
        [[填充]对齐方式][正负号][#][0][宽度][分组选项][.精度][类型码]

### 填充：只能是一个字符，默认用空格填充，如果指定填充字符，则必须要同时指定对齐方式

### 对齐

    <：左对齐
    >：右对齐
    ^：居中
    =：在正负号（如果有的话）和数字之间填充，该对齐选项仅对数字类型有效。
    注意：如果不给定最小宽度 width，对齐方式毫无意义。

### 正负号

    正负号选项仅对数字类型生效，取值有三种：
    + 正数前面添加正号，负数前面添加负号
    - 仅在负数前面添加负号（默认行为）
    空格：正数前面需要添加一个空格，以便与负数对齐
        '{:哈=+8.2f}'.format(3.14159))      +哈哈哈3.14
        '{:哈=+8.2f}'.format(-3.14159))     -哈哈哈3.14
        '{:哈=+8.2f}'.format(0))            +哈哈哈0.00
        '{:哈=+8.2f}'.format(-0))           +哈哈哈0.00

### #号

    给u二进制数加上 0b 前缀
    给八进制数加上 0o 前缀
    给十六进制数加上 0x 前缀

### 最小宽度width

    如果不指定，最小字段宽度由内容决定，与内容相等
    如果最小宽度前面有一个前导 0，意味着用 0 填充
    这等价于指定了 0= 的填充和对齐方式

### 分组选项

    分组选项 grouping_option 的取值有两种：

#### 逗号 ,：使用逗号对数字以千为单位进行分隔

    n 类型使用本地化的分组选项 ,此项报错，我怀疑是因为中文没有数字的分隔符
    '数字：{0:,n}'.format(6666))    ValueError: Cannot specify ',' with 'n'.

    使用 d 类型确实是可以的
    '数字：{0:,d}'.format(6666)   => 数字：6,666

#### 下划线 _：使用下划线对浮点数和 d 类型的整数以千为单位进行分隔。对于 b、o、x 和 X 类型，每四位插入一个下划线，其他类型都会报错

    作用于 b 类型
    '数字：{0:_b}'.format(0b100111011)  =>  数字：1_0011_1011

    作用于 o 类型
    '数字：{0:_o}'.format(0o426754316)  =>  数字：4_2675_4316

    作用于 x 类型
    '数字：{0:_x}'.format(0x2a846e98d))   数字：2_a846_e98d

    作用于 X 类型
    '数字：{0:_X}'.format(0X2a846e98d)      数字：2_A846_E98D

    作用于其他类型（比如 n 类型）
    '字符串：{0:_n}'.format(1234567)        ValueError: Cannot specify ',' with 'n'.

### 精度

    精度指定了小数点后面要展示多少位小数整数类型不能指定精度

#### 对于非数字类型，精度指定最大字段宽度

    '{0:.3}'.format('哇哈哈哈哈哈')       哇哈哈

#### 整数类型不能指定精度

    '{:.3d}'.format(666)    ValueError: Precision not allowed in integer format specifier

### 类型码

    类型码可以分为三大类：

### s 字符串类型

    这是字符串的默认类型，可以省略。None 不指定类型。同 s 类型。
    '{0:s}'.format('略略略'))       略略略
    '{0:}'.format('略略略'))        略略略

### 整数类型

    1. b 二进制
    '{0:b}'.format(3)        11

    1. c 类型：把整数转换成 unicode 字符
    '{:c}'.format(97))      a

    1. d 类型：十进制整数
    '{:d}'.format(666))     666

    1. o 类型：八进制数
    '{:o}'.format(10))

    1. x 类型：十六进制数，a到f小写
    '{:x}'.format(15))      f

    1. X 类型：十六进制数，A到F大写
    '{:X}'.format(15))      F

    1. n 数字 number类型：与d相同，会插入本地化的分隔符
    '{:n}'.format(66666))
    经试验，本机无法为 n 指定任何分组选项（,_）
    '{:,n}'.format(66666))      ValueError: Cannot specify ',' with 'n'.
    '{:_n}'.format(66666))      ValueError: Cannot specify ',' with 'n'.

    None 不指定类型，与 d 相同。

### 浮点数类型

1. e 类型：科学记数法,默认精度为 6 位
'{:e}'.format(1234567.1234567))     1.234567e+06

2. E 类型：与 e 相同，用大写 E 表示指数， 默认精度为 6 位
'{:E}'.format(1234567.1234567))     1.234567E+06
'{:.10E}'.format(1234567.1234567))      修改精度为 10 位,1.2345671235E+06

3. f 类型f，定点记法， 默认精度为 6 位
'{:f}'.format(1234567.1234567))         1234567.123457

### F 定点记法，同 f，但是会把 nan 转换成 NAN，把 inf 转换成 INF

nan = float('nan')
inf = float('inf')
'{:F}\n{:F}'.format(nan, inf))       NAN     INF

### g 类型 通用 general 格式。自动转换到 e 或者 f 格式，具体的转换规则在此省略。正无穷、负无穷、正零、负零和非数字分别显示为 inf，-inf，0，-0，nan。指定精度为 0 时等价于精度为 1。默认精度为 6 位

'{:g}'.format(1234567.1234567))     1.23457e+06
'{:g}'.format(1234.1234))           1234.12

### G 通用 general 格式。自动转换到 E 或者 F 格式，转换规则同上，相应表示方式换成大写

    '{:g}'.format(1234567.1234567))     1.23457e+06
    '{:g}'.format(1234.1234))           1234.12

### n 数字 number 类型。跟 g 一样，只不过用本地化的分隔符来分隔数字

    '{:n}'.format(1234567.1234567))     1.23457E+06
    '{:n}'.format(1234.1234))           1234.12

    经试验，本机指定分组选项会报错
    '{:,n}'.format(1234.1234))  ValueError: Cannot specify ',' with 'n'.
    '{:_n}'.format(1234.1234))  ValueError: Cannot specify ',' with 'n'.

### % 百分号类型。会将数字乘以 100，然后以 f 定点 fixed-point 格式显示，最后加上一个百分号 %

    '{:%}'.format(1))           100.000000%
    None 不指定类型。输出效果类似调用 str() 函数。

### 补充说明

#### 打印花括号需要使用花括号转义

    '{{{}}}'.format('张无忌'))      {张无忌}

#### 对象可以自定义格式说明符来替换标准格式说明符，比如 datetime 类

    "Today is: {0:%a %b %d %H:%M:%S %Y}".format(datetime.now()))
    今天是：Thu Nov 15 13:05:09 2018
